// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: transcripts.sql

package sqlc

import (
	"context"
)

const deleteTranscript = `-- name: DeleteTranscript :exec
DELETE FROM session_transcripts WHERE session_id = ?
`

func (q *Queries) DeleteTranscript(ctx context.Context, sessionID string) error {
	_, err := q.db.ExecContext(ctx, deleteTranscript, sessionID)
	return err
}

const getTranscript = `-- name: GetTranscript :one
SELECT gzip_data FROM session_transcripts WHERE session_id = ?
`

func (q *Queries) GetTranscript(ctx context.Context, sessionID string) ([]byte, error) {
	row := q.db.QueryRowContext(ctx, getTranscript, sessionID)
	var gzip_data []byte
	err := row.Scan(&gzip_data)
	return gzip_data, err
}

const storeTranscript = `-- name: StoreTranscript :exec
INSERT OR REPLACE INTO session_transcripts (session_id, gzip_data, created_at)
VALUES (?, ?, datetime('now'))
`

type StoreTranscriptParams struct {
	SessionID string `json:"session_id"`
	GzipData  []byte `json:"gzip_data"`
}

func (q *Queries) StoreTranscript(ctx context.Context, arg StoreTranscriptParams) error {
	_, err := q.db.ExecContext(ctx, storeTranscript, arg.SessionID, arg.GzipData)
	return err
}

const transcriptExists = `-- name: TranscriptExists :one
SELECT COUNT(*) FROM session_transcripts WHERE session_id = ?
`

func (q *Queries) TranscriptExists(ctx context.Context, sessionID string) (int64, error) {
	row := q.db.QueryRowContext(ctx, transcriptExists, sessionID)
	var count int64
	err := row.Scan(&count)
	return count, err
}
