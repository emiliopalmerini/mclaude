package templates

import "fmt"

func buildPaginationURL(baseURL string, page int, queryParams string) string {
	if queryParams == "" {
		return fmt.Sprintf("%s?page=%d", baseURL, page)
	}
	return fmt.Sprintf("%s?%s&page=%d", baseURL, queryParams, page)
}

templ Pagination(currentPage, totalPages int, baseURL string) {
	@PaginationWithParams(currentPage, totalPages, baseURL, "")
}

templ PaginationWithParams(currentPage, totalPages int, baseURL, queryParams string) {
	<div class="pagination">
		if currentPage > 1 {
			<a
				href={ templ.SafeURL(buildPaginationURL(baseURL, currentPage-1, queryParams)) }
				hx-get={ buildPaginationURL(baseURL, currentPage-1, queryParams) }
				hx-target="#content"
				hx-swap="innerHTML"
				hx-push-url="true"
				class="pagination__link"
			>
				Previous
			</a>
		}
		<span class="pagination__info">
			Page { fmt.Sprintf("%d", currentPage) } of { fmt.Sprintf("%d", totalPages) }
		</span>
		if currentPage < totalPages {
			<a
				href={ templ.SafeURL(buildPaginationURL(baseURL, currentPage+1, queryParams)) }
				hx-get={ buildPaginationURL(baseURL, currentPage+1, queryParams) }
				hx-target="#content"
				hx-swap="innerHTML"
				hx-push-url="true"
				class="pagination__link"
			>
				Next
			</a>
		}
	</div>
}
