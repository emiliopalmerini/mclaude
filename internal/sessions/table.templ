package sessions

import (
	"claude-watcher/internal/shared/format"
	"claude-watcher/internal/shared/templates"
)

templ SessionsTable(data SessionsData) {
	<table class="sessions-table">
		<thead>
			<tr>
				<th>Timestamp</th>
				<th>Host</th>
				<th>Branch</th>
				<th>Duration</th>
				<th>Prompts</th>
				<th>Tools</th>
				<th>Cost</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			for _, s := range data.Sessions {
				<tr>
					<td>{ s.Timestamp }</td>
					<td>{ s.Hostname }</td>
					<td>{ format.NullStr(s.GitBranch) }</td>
					<td>{ format.Duration(s.DurationSeconds) }</td>
					<td>{ format.NullInt(s.UserPrompts) }</td>
					<td>{ format.NullInt(s.ToolCalls) }</td>
					<td>{ format.NullCost(s.EstimatedCostUsd) }</td>
					<td><a href={ templ.SafeURL("/sessions/" + s.SessionID) }>View</a></td>
				</tr>
			}
		</tbody>
	</table>
	@templates.PaginationWithParams(data.Page, data.TotalPages, "/sessions", data.ActiveFilters.QueryString())
}
